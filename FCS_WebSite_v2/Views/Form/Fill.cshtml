@using FCS_WebSite_v2.Data.Forms;
@using FCS_WebSite_v2.Data.DB;

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/FCS_WebSite_v2.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/form/edit.css" />
</head>
@using (Html.BeginForm("SendForm", "Form", new { id = Model.Item1.Id }, FormMethod.Post))
{
    <body>
        <div class="container">
            <div class="row">
                <div class="col border border-1">
                </div>
                <div class="col-7 border border-1 ">
                    <p class="text-center">@Model.Item1.Name</p>
                </div>
                <div class="col border border-1">
                </div>
            </div>
            <div class="row">
                <div class="col border border-1">
                </div>
                <div class="col-7 border border-1 ">
                    @foreach (FormQuestion formQuestion in Model.Item2)
                    {
                        string questionId = formQuestion.Id.Split(";;")[0].Split("_")[1];
                        <div id="questionPlace_@questionId" name="place_@questionId">
                            <div class="row">
                                <div class="col">
                                    <p id="question_@questionId">@formQuestion.Content</p>
                                    @if (formQuestion.TypeId == "qshort")
                                    {
                                        <input type="text" class="form-control" placeholder="Ответ" />
                                    }
                                    else if (formQuestion.TypeId == "qlong")
                                    {
                                        <textarea class="form-control"></textarea>
                                    }
                                    else if (formQuestion.TypeId == "qcheckbox")
                                    {
                                        var checkboxSplited = formQuestion.Content.Split(";").ToList();
                                        <script>
                                            document.getElementById("question_@questionId").innerText =
                                                "@checkboxSplited[0]";
                                        </script>
                                        for (int i = 1; i < checkboxSplited.Count; i++)
                                        {
                                            <div class="input-group mb-3" id="variantPlace_@(questionId)_@i">
                                                <div class="input-group-text">
                                                    <input class="form-check-input mt-0" type="checkbox" value="" aria-label="">
                                                </div>
                                                <input type="text" class="form-control" aria-label="" value="@checkboxSplited[i]"
                                       name="inputPlace_@(questionId)_@i">
                                                <button class="btn-close" type="button"
                                        onclick="deleteElement('inputField_@questionId', 'variantPlace_@(questionId)_@i')">
                                                </button>
                                            </div>

                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="col border border-1">
                </div>
            </div>
            <div class="row">
                <div class="col border border-1">
                </div>
                <div class="col-7 border border-1 justify-content-center text-center">
                    <button type="submit" class="btn btn-outline-primary">
                        Отправить
                    </button>
                </div>
                <div class="col border border-1">
                </div>
            </div>
        </div>



        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="~/bootstrap/js/bootstrap.min.js"></script>
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
    </body>
}

